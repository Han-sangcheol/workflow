"""
AI 프롬프트 설정
업무일지 분석을 위한 프롬프트 템플릿을 정의합니다.
"""

# 시스템 프롬프트 (AI 역할 정의)
SYSTEM_PROMPT = """당신은 FW팀의 업무일지를 분석하고 정리하는 전문가입니다.
정확하고 체계적으로 업무 내용을 정리하며, 항상 한국어로 응답합니다.
중국어 간체자는 절대 사용하지 않습니다."""


# 텍스트 정리 프롬프트 (1단계: 원본 텍스트 → 정리된 텍스트)
CLEANING_PROMPT = """다음은 팀원들의 일일 업무일지 원본 텍스트입니다.
업무일지 구조를 정확히 파악하여 아래 [출력 형식]에 맞춰 정리해주세요.

[업무일지 원본 구조 - 반드시 이해할 것]
각 팀원의 업무일지는 다음과 같은 표 구조입니다:
- 헤더: "FW팀 [팀원명]" + "일자: YYYY.MM.DD"
- 분류 열: "금일업무" 또는 "익일업무"
- 구분 열: 프로젝트 대분류 (예: "Unit Chair bright Simple", "통합형 일렉모터 드라이버")
- 상세내용 열: 프로젝트별 세부 업무 (번호, 목적, Action 등)
- 수치 열: 계획(H), 달성(H), 계획(%), 달성(%)

[핵심 지침 - 반드시 준수]
1. **금일업무만 추출**: "분류"가 "금일업무"인 행만 추출. "익일업무"는 완전히 무시!
2. **구분 열로 프로젝트 분류**: "구분" 열의 값이 프로젝트 대분류명입니다.
   - 예: "Unit Chair bright Simple" → 프로젝트명: "bright Simple"
   - 예: "통합형 일렉모터 드라이버 개발" → 프로젝트명: "통합형 일렉모터 드라이버"
3. **모든 팀원 이름 추출**: 문서에서 "FW팀 [이름]" 패턴의 모든 팀원 이름을 추출
4. **진행률 추출**: 계획(%)과 달성(%) 수치를 정확히 추출
5. 중국어 간체자는 한국어로 변환

[프로젝트 대분류 기준]
다음 키워드로 프로젝트를 분류하세요:
- "bright Simple" 또는 "Unit Chair" → [bright Simple]
- "이송로봇" 또는 "WebGUI" 또는 "Display GUI" → [치과용 이송로봇]
- "일렉모터" 또는 "드라이버" → [통합형 일렉모터 드라이버]
- 기타 → 원본 구분명 유지

[출력 형식]
########## 팀원 목록 ##########
[팀원1 이름], [팀원2 이름], [팀원3 이름], ...

########## [팀원 이름] (YYYY.MM.DD) ##########

[프로젝트 대분류: bright Simple]
• 세부 프로젝트: [상세내용의 프로젝트명]
• 목적: [목적]
• Action:
  - [Action 항목 1]
  - [Action 항목 2]
• 진행률: 계획 OO% / 달성 OO%

[프로젝트 대분류: 치과용 이송로봇]
• 세부 프로젝트: [상세내용의 프로젝트명]
• 목적: [목적]
• Action:
  - [Action 항목]
• 진행률: 계획 OO% / 달성 OO%

########## [다음 팀원 이름] (YYYY.MM.DD) ##########
... (반복)

[원본 텍스트]
{documents_text}
"""


# 통합 회의록 생성 프롬프트 (2단계: 정리된 텍스트 → 회의록)
SUMMARY_PROMPT = """다음은 정리된 팀원들의 일일 업무일지입니다.
이 내용을 바탕으로 아래 [회의록 양식]에 맞춰 통합 회의록을 작성해주세요.

[핵심 지침 - 반드시 준수]
1. **참석자**: 정리된 텍스트 상단의 "팀원 목록"에서 모든 이름을 추출하여 참석자에 기재
2. **프로젝트 대분류 기준 통합**: 
   - [프로젝트 대분류: bright Simple] → "1 bright Simple 개발"로 통합
   - [프로젝트 대분류: 치과용 이송로봇] → "2 치과용 이송로봇 개발"로 통합
   - [프로젝트 대분류: 통합형 일렉모터 드라이버] → "3 통합형 일렉모터 드라이버 개발"로 통합
3. **같은 프로젝트 대분류는 반드시 하나로**: 여러 팀원의 같은 프로젝트 업무를 하나로 합침
4. **담당자/목표일자**: 각 프로젝트 맨 마지막에 한 번만 (해당 프로젝트 참여 팀원 모두 나열)
5. **진행률**: 해당 프로젝트의 평균 또는 대표 진행률 표시

[회의록 양식]
================================================================================
                              회   의   록
--------------------------------------------------------------------------------
회의주제: 진료장비사업부 펌웨어팀 일일 회의
회의일자: YYYY.MM.DD
회의장소: 5층 진료장비사업부
참 석 자: [팀원 목록의 모든 이름 - 반드시 전원 기재]
================================================================================

■ 회의내용                                              ■ 담당자 및 일정
--------------------------------------------------------------------------------
금주(일일) 이슈 사항

1 bright Simple 개발 (진행률%)
  1.1 [세부 기능 - 양산 이관/UI 개발/무선풋 등]
      a [업무 내용] (완료/진행중)
      b [업무 내용]
  1.2 [세부 기능]
      a [업무 내용]
  목표일자: YY.MM.DD (또는 "추후 협의")
  담당자: [해당 프로젝트 참여 팀원 전원]

2 치과용 이송로봇 개발 (진행률%)
  2.1 [세부 기능 - MCU/WebGUI/Display 등]
      a [업무 내용]
  2.2 [세부 기능]
      a [업무 내용]
  목표일자: YY.MM.DD
  담당자: [해당 프로젝트 참여 팀원 전원]

3 통합형 일렉모터 드라이버 개발 (진행률%)
  3.1 [세부 기능]
      a [업무 내용]
  목표일자: YY.MM.DD
  담당자: [해당 프로젝트 참여 팀원 전원]

                              - 이상입니다 -
================================================================================

[작성 규칙 - 필수]
1. 프로젝트 통합 (가장 중요):
   - "프로젝트 대분류"가 같으면 무조건 하나의 프로젝트로 통합
   - 팀원별로 분리하지 않고, 프로젝트별로 모든 업무를 합침
   - bright Simple 관련은 모두 1번으로, 이송로봇 관련은 모두 2번으로
   
2. 번호 체계:
   - 대분류 프로젝트: 1, 2, 3 (최대 3~4개)
   - 세부 기능: 1.1, 1.2, 1.3... 
   - 상세 업무: a, b, c, d...

3. 담당자:
   - 해당 대분류 프로젝트에 업무가 있는 모든 팀원 이름을 나열
   - 예: "담당자: 김종민, 강민성, 한상철"

4. 참석자:
   - 반드시 팀원 목록의 모든 이름을 기재 (누락 금지)

[정리된 업무일지]
{cleaned_text}
"""


# 감사 인사 생성 프롬프트 (3단계: 정리된 텍스트 → 감사 인사)
THANKS_PROMPT = """다음은 정리된 팀원들의 일일 업무일지입니다.
각 팀원의 업무 내용을 바탕으로 개인별 감사 인사를 작성해주세요.

[요구사항]
1. 각 팀원의 구체적인 업무 내용을 언급하여 개인화된 메시지 작성
2. 진심 어린 감사와 격려의 마음 전달
3. 각 팀원당 3-4문장 정도로 작성
4. 따뜻하고 격려하는 톤 유지
5. 반드시 한국어로만 작성 (중국어 간체자 사용 금지)

[감사 인사 형식]
## 팀원별 감사 인사

### [팀원1 이름]님께
[개인화된 감사 메시지 - 구체적인 업무 내용 언급]

### [팀원2 이름]님께
[개인화된 감사 메시지 - 구체적인 업무 내용 언급]

[정리된 업무일지]
{cleaned_text}
"""

